<!doctype html>
<html lang="en" data-theme=light>
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/images/corelai-logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Corelai - Prime</title>
  </head>
  <body>
    <div id="root"></div>

    <!-- Styles -->
    <style>
      #chartdiv {
        width: 100%;
        height: 500px;
      }
    </style>

    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

    <!-- Chart code -->
    <script>

      setTimeout(function () {


        am5.ready(function() {

          var root = am5.Root.new("corelaiRing");


          root.setThemes([
            am5themes_Animated.new(root)
          ]);


          var chart = root.container.children.push(am5radar.RadarChart.new(root, {
            panX: false,
            panY: false,
            wheelX: "none",
            wheelY: "none",
            startAngle: 0,
            endAngle: 360,
            innerRadius: am5.percent(90)
          }));


          chart.set("cursor", am5radar.RadarCursor.new(root, {
            behavior: "none" // <--- IMPORTANTE
          }));
          chart.zoomOutButton.set("forceHidden", true);
          var xRenderer = am5radar.AxisRendererCircular.new(root, {
            minGridDistance: 1
          });

          xRenderer.grid.template.setAll({

            forceHidden: true,
            visible: false
          });

          xRenderer.labels.template.set("text","");

          var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
            maxDeviation: 0,
            categoryField: "category",
            renderer: xRenderer
          }));

          xAxis.setAll({
            startLocation: 0,
            endLocation: 1,
            zoomX: false, // sicurezza extra
            tooltip: null
          });

// Forza disattivazione dello zoom/scroll interno
          xAxis.get("renderer").set("minGridDistance", 50); // aumenta spazio tra categorie
          xAxis.set("forceHidden", false);

          var yRenderer = am5radar.AxisRendererRadial.new(root, {});
          yRenderer.labels.template.set("centerX", am5.p50);
          yRenderer.labels.template.set("forceHidden", true);
          var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
            maxDeviation: 0.3,
            min: 0,
            renderer: yRenderer,
            max:30
          }));

          xAxis.set("tooltip", am5.Tooltip.new(root, {
            forceHidden: true
          }));

          yAxis.set("tooltip", am5.Tooltip.new(root, {
            forceHidden: true
          }));



          var series = chart.series.push(am5radar.RadarColumnSeries.new(root, {
            name: "Series 1",
            sequencedInterpolation: true,
            xAxis: xAxis,
            yAxis: yAxis,
            valueYField: "value",
            categoryXField: "category"

          }));

          series.columns.template.setAll({
            cornerRadius: 0,
            tooltipText: null
          });

          series.columns.template.adapters.add("fill", function (fill, target) {
            return  am5.color(0xD6C38D);
          });

          series.columns.template.adapters.add("stroke", function (stroke, target) {
            return am5.color(0xD6C38D);
          });


// Set data
          var data = [];

          for (var i = 0; i < 30; i++) {
            data.push({ category: i, value: i });
          }

          xAxis.data.setAll(data);
          series.data.setAll(data);
          //
          chart.appear(5000, 100);
          series.appear(3000,100);

        }); // end am5.ready()


      },500);

    </script>

    <script type="module" src="./src/app/main.tsx"></script>
  </body>
</html>
